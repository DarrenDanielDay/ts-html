(function(t){function e(e){for(var r,i,a=e[0],c=e[1],u=e[2],l=0,f=[];l<a.length;l++)i=a[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);d&&d(e);while(f.length)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(r=!1)}r&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},s={app:0},o=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/ts-html/canvas-with-3d/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("cd49")},a9a5:function(t,e,n){},cd49:function(t,e,n){"use strict";n.r(e);var r=n("2b0e"),s=function(){var t=this;t._self._c,t._self._setupProxy;return t._m(0)},o=[function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{attrs:{id:"app"}},[e("div",[t._v("将鼠标移到框内查看3D立方体")]),e("canvas",{attrs:{width:"400",height:"300",id:"cvs"}}),e("div",[t._v("屏幕所在平面方程：x + y + z = 100√3")]),e("div",[t._v("当前鼠标三维坐标")]),e("div",{attrs:{id:"message"}}),e("div",[t._v("当前鼠标二维坐标")]),e("div",{attrs:{id:"position"}}),e("div",{attrs:{id:"plane"}})])}],i=n("9ab4"),a=n("60a3");n("14d9");const c={x:0,y:0,z:0};function u(t,e,n){const r={x:t,y:e};return void 0!==n&&(r.z=n),r}function d(t){return!!t&&"undefined"!==typeof t.z}function l(t){return Object.assign({},t)}function f(t){let e=`x: ${t.x.toFixed(8)} y: ${t.y.toFixed(8)}`;return d(t)&&(e+=" z: "+t.z.toFixed(8)),e}function y(t,e){return d(t)&&d(e)?t.x*e.x+t.y*e.y+t.z*e.z:t.x*e.x+t.y*e.y}function h(t){return Math.sqrt(y(t,t))}function x(t,e){return t.x*=e,t.y*=e,d(t)&&(t.z*=e),t}function p(t,e){return t.x+=e.x||0,t.y+=e.y||0,d(t)&&(t.z+=e.z||0),t}function v(t,e){return t.x-=e.x,t.y-=e.y,d(t)&&d(e)&&(t.z-=e.z),t}function g(t){const e=h(t),n={x:t.x/e,y:t.y/e};return d(t)&&(n.z=t.z/e),n}function b(t,e){return y(t,e)/y(e,e)}function m(t,e){const n={x:b(t,e.xBasis),y:b(t,e.yBasis)};return d(t)&&(n.z=b(t,e.zBasis)),n}function w(t,e){return y(t,e)/h(e)}function z(t,e){const n=x(l(e.xBasis),t.x),r=x(l(e.yBasis),t.y),s=p(n,r);if(d(t)){const r=x(l(e.zBasis),t.z);p(n,r)}return s}function B(t,e){return{x:t.y*e.z-e.y*t.z,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}}function _(t,e){return{x:w(v(l(t),e.origin),e.xBasis),y:w(v(l(t),e.origin),e.yBasis)}}function O(t){return{origin:m(v(l(c),t.origin),t.basis),xBasis:m({x:1,y:0,z:0},t.basis),yBasis:m({x:0,y:1,z:0},t.basis)}}function j(t,e){const n=O(t),{x:r,y:s}=e;return p(p(x(g(n.xBasis),r),x(g(n.yBasis),s)),n.origin)}function P(t,e){return{start:_(t.start,e),end:_(t.end,e)}}function M(t,e,n){e.save(),void 0!==n&&(e.strokeStyle=n),e.beginPath(),e.moveTo(Math.round(t.start.x),Math.round(t.start.y)),e.lineTo(Math.round(t.end.x),Math.round(t.end.y)),e.closePath(),e.stroke(),e.restore()}class k{constructor(t,e,n,r){this.a=t,this.b=e,this.c=n,this.coor=r}draw(t){const e=O(this.coor);for(const r of this.lines())M(P(r,e),t,r.style);t.beginPath();const n=_(c,e);t.arc(n.x,n.y,1,0,2*Math.PI),t.stroke()}lines(){const{a:t,b:e,c:n}=this,r=u(-t,-e,-n),s=u(t,-e,-n),o=u(t,e,-n),i=u(-t,e,-n),a=u(-t,-e,n),d=u(t,-e,n),l=u(t,e,n),f=u(-t,e,n);return[{start:r,end:s,style:"red"},{start:s,end:o,style:"green"},{start:o,end:i,style:"red"},{start:i,end:r,style:"blue"},{start:r,end:a,style:"blue"},{start:s,end:d,style:"green"},{start:o,end:l,style:"green"},{start:i,end:f,style:"blue"},{start:a,end:d,style:"red"},{start:d,end:l,style:"green"},{start:l,end:f,style:"red"},{start:f,end:a,style:"blue"},{start:c,end:u(t,0,0)}]}}const S=Math.sqrt(2),T=Math.sqrt(3),q=Math.sqrt(6),E={xBasis:{x:1/S,y:1/q,z:1/T},yBasis:{x:-1/S,y:1/q,z:1/T},zBasis:{x:0,y:-S/T,z:1/T}},F={origin:{x:200,y:150,z:-100},basis:E};let I=class extends a["b"]{mounted(){this.canvas=document.getElementById("cvs"),this.context2d=this.canvas.getContext("2d"),this.draw(),this.canvas.addEventListener("mousemove",t=>{console.log("mousemove",t.offsetX,t.offsetY),this.clear();const e=t.offsetX,n=t.offsetY,r=j({origin:F.origin,basis:E},{x:e,y:n});document.getElementById("message").innerText=f(r),document.getElementById("position").innerText=f({x:e,y:n});const s=z(g(r),E),o=g(B(E.xBasis,s)),i=g(B(o,s));F.basis={xBasis:s,yBasis:o,zBasis:i},this.draw()})}clear(){console.log("clear!"),this.context2d.clearRect(0,0,this.canvas.width,this.canvas.height),this.context2d.closePath()}draw(){console.log("draw!");O(F);new k(50,50,50,F).draw(this.context2d)}};I=Object(i["a"])([Object(a["a"])({components:{}})],I);var A=I,N=A,$=(n("eebb"),n("2877")),C=Object($["a"])(N,s,o,!1,null,null,null),J=C.exports,X=n("8c4f");r["a"].use(X["a"]);const Y=[],D=new X["a"]({mode:"history",base:"/ts-html/canvas-with-3d/",routes:Y});var L=D,R=n("2f62");r["a"].use(R["a"]);var G=new R["a"].Store({state:{},mutations:{},actions:{},modules:{}}),H=n("9483");Object(H["a"])("/ts-html/canvas-with-3d/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}}),r["a"].config.productionTip=!1,new r["a"]({router:L,store:G,render:t=>t(J)}).$mount("#app")},eebb:function(t,e,n){"use strict";n("a9a5")}});
//# sourceMappingURL=app.e5dceb48.js.map